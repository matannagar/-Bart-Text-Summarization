<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html prefix="og: http://ogp.me/ns#" lang="en" style="height: 100%">

<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>

    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=5" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>HiLo's Summarizer</title>
    <meta name="description" content="bart summarizer Description">
    <meta property="og:title" content="bart summarizer">
    <meta property="og:description" content="bart summarizer Description">
    <meta name="generator" content="Quest">
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,500,600,700,800">
    <!-- <link rel="stylesheet" href="./index.css" type="text/css"/> -->
</head>

<body class="websiteBody">

    <div class="WebHeadlines">
        <h1>HiLo Summarize Tool</h1>
        <h2>Why not leveraging technology to save
            <br>your time and allow you to utilize it for
            <br>focusing on what really matters?
            <br>
            <br>
        </h2>
    </div>

    <form action="/index" method="POST" enctype="multipart/form-data">
        <!-- Load File Button -->
        <div class="upldbtn-out">
            <input type="file" name="file1" id="file1" />
            <label class="upldbtn" for="file1">Upload a file</button>
        </div>

        <!-- Drag&Drop Box -->
        <div class="drag-drop-outer">
            <div class="dropzone" id="dropzone">
                <!-- <p id="textInside"></p>-->
                <label class="button" id="btndd" for="fileElem">Drag a file here</label>
                <input type="file" name="file2" id="fileElem">
            </div>
        </div>
        <br>
        <!-- max words box -->
        <div class="max-words-outer">
            <div id="max-words-box" class="max-words-box">
                <label for="max-words"></label>
                <input type="number" id="max-words" name="max-words" defaultValue="100" min="100" step="10"
                    placeholder="Summary's max words...">
            </div>
        </div>
        <!-- percentage box -->
        <div class="percentage-box-outer">
            <div id="percentage-box" class="percentage-box">
                <label for="percentage"></label>
                <input type="number" id="percentage" name="percentage" min="10" max="100"
                    placeholder="Summary's length in percentages...">
            </div>
        </div>

        <!-- Button summarizer -->
        <div class="buttonSummarize-outer">
            <label for="SummarizeButton"></label>
            <input type="submit" id="SummarizeButton" name="SummarizeButton" value="Summarize!"
                onclick="$('#loading').show();">
        </div>
    </form>

    <div class="textsummary-outer">
        <div id="textsummary" data-name="textsummary" alt="textsummary" class="textsummary">
            <div name='summary'>
                <br>
                <br>
                <p id="Summary"></p>
                <p id="temp">{{summary}} </p>
                <div id="loading" style="display:none;"><img src="../static/assets/images/loading.gif" alt="" />
                    <p>Summarization in process...</p>
                </div>
                <p>{{error}}</p>
                <p>{{name}}</p>
                <p>{{ content }}</p>
            </div>
        </div>
    </div>

    <!-- BOTTOM RIGHT BUTTONS SECTION -->
    <div class="sharing_buttons">
        <br>
        <!-- SAVE FUNCTION -->
        <div class="download-summary-outer">
            <form onsubmit="download(this['name'].value, this['text'].value)">
                <label>
                    <input type="text" name="name" value="test.txt">
                </label>
                <label>
                    <textarea name="text" style="display:none;">{{summary}}</textarea>
                </label>
                <input type="submit" id="outer_download_button" value="Download">
            </form>
        </div>
        <img src="../static/assets/images/Union.png">
        <!-- SHARE TO EMAIL -->
        <a class="fa fa-google" id="mail" href="" title="Share by Email" style="background: #dd4b39;
        color: white;">
            <!-- <img src="http://png-2.findicons.com/files/icons/573/must_have/48/mail.png"> -->
        </a>
        <!-- SHARE TO LINKEDIN -->
        <a class="fa fa-linkedin" id="linkedin" href="" style="background: #007bb5;
        color: white;"
            onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;">
            <!-- <img src="http://chillyfacts.com/wp-content/uploads/2017/06/LinkedIN.gif" alt="" width="54" height="20" /> -->
        </a>
        <a class="fa fa-twitter" id="twitter" href="" style="  background: #55ACEE;
        color: white;" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0');
             return false;"></a>>
        <input type=button id="register" value='SAVE' onClick=to_open()>
    </div>


    <script type="text/javascript" src="../static/index.js"></script>
</body>


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<!-- SHARING URL FUNCTIONALITY -->
<script>
    //open registration window 
    function to_open() {
        const openWindow = window.open("http://localhost/test/form.html", 'rating', "width=400,height=170,left=150,top=200");
        const timer = setInterval(() => {
            if (openWindow.closed) {
                clearInterval(timer);
                // alert('"Secure Payment" window closed!');
                document.getElementById('outer_download_button').click();
            }
        }, 500);


    }
    // Gets variable from URL
    function getUrlVars() {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for (var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    }

    function getUrlParam(parameter) {
        var urlparameter;
        if (window.location.href.indexOf(parameter) > -1) {
            urlparameter = getUrlVars()[parameter];
        }
        return urlparameter;
    }

    // CREATE ENCODED URL
    function buildUrl(url, parameters) {
        var qs = "";
        for (var key in parameters) {
            var value = parameters[key];
            qs += encodeURIComponent(key) + "=" + encodeURIComponent(value) + "&";
        }
        if (qs.length > 0) {
            qs = qs.substring(0, qs.length - 1); //chop off last "&"
            url = url + "?" + qs;
        }
        return url;

    }

    serialize = function (obj) {
        var str = [];
        for (var p in obj)
            if (obj.hasOwnProperty(p)) {
                str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
            }
        return str.join("&");
    }

    // Loading that parameter if present
    window.onload = function () {
        var mytext = getUrlParam('Summary');
        if (mytext !== undefined)
            document.getElementById('Summary').innerHTML = decodeURIComponent(mytext);

        // var url = "http://127.0.0.1:5000/index?";
        var url = "http://mywebsite.com/index?";

        //get summary from previously loaded file
        var summary_for_url = document.getElementById('temp').innerHTML
        //create encoded summary for URL
        var temp = serialize({ Summary: String(summary_for_url) });

        //MAIL CODE
        var p1 = "mailto:?body=Check out this Article Summarization by HiLo \n" + url + "\n";
        var p2 = "&subject=HiLo's Summarization Tool";
        var mail = p1 + encodeURIComponent(temp) + p2 + "\n";
        var a = document.getElementById('mail');
        a.href = mail;

        //LINKEDIN CODE
        var linkedin = "https://www.linkedin.com/shareArticle?mini=true&url=" + url + encodeURIComponent(temp) + "&title=Temporary Title&source=Chillyfacts";
        var b = document.getElementById('linkedin');
        b.href = linkedin;

        //TWITTER CODE
        var twitter = "https://twitter.com/intent/tweet?text=" + url + encodeURIComponent(temp);
        var c = document.getElementById('twitter');
        c.href = twitter;
    };

</script>
<script type="text/javascript">
    jQuery("input#fileElem").change(function () {
        alert("File Chosen")
    });
    jQuery("input#file1").change(function () {
        alert("File Chosen")
    });
</script>

</html>
