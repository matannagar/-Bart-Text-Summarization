/*!
 * CBE tracking
 *
 * JavaScript tracking client
 *
 * @link http://capturehighered.com
 */
!function(){"use strict";function i(t,e,n,i){(e=w(e)?e:{}).error=T(t)?t:"",e.method=n||"",e.cbe="error",w(t)&&(e.error=t.message,e.errorFull=t.toString(),e.errorName=T(t.name)&&t.name,e.errorStack=T(t.stack)&&t.stack,e.errorFile=T(t.fileName)&&t.fileName,e.errorLine=!isNaN(t.lineNumber)&&t.lineNumber,e.errorCol=!isNaN(t.columnNumber)&&t.columnNumber),x({url:i,data:e})}function r(t,e){if(1==e.length&&null!==e[0]&&"object"==typeof e[0]&&!q.isNode(e[0]))return e[0];for(var n={},i=Math.min(t.length+1,e.length),r=0;r<i;r++)r<t.length&&(n[t[r]]=e[r]);return n}function a(t){var e,n=[];for(e in t)w(t[e])&&t[e]?n.push(_.encodeURIComponent(e)+"="+_.encodeURIComponent(N(t[e]))):t.hasOwnProperty(e)&&t[e]&&""!==t[e]&&n.push(_.encodeURIComponent(e)+"="+_.encodeURIComponent(t[e]));return n.join("&")}function o(t,e){for(var n in e)t[n]=e[n];return t}function t(t){return"prerender"!=E.visibilityState&&"hidden"!=E.visibilityState&&(t(),!0)}function s(t,e){return t=A(t),e=e?I(e):_.location,t===A(e.hostname)}function h(t){return void 0!==t}function c(t){return"function"==typeof t}function u(t){return"[object Array]"==Object.prototype.toString.call(Object(t))}function l(t){return!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}function d(t){return t&&"function"==typeof t.trim?t.trim():t.replace(/^\s+|\s+$|^\u00A0+|\u00A0+$/g,"")}function f(t,e,n){if(!t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e,n);var i,r=Object(t),a=r.length>>>0;if(0==a)return-1;if(a<=(n|=0))return-1;for(i=Math.max(0<=n?n:a-Math.abs(n),0);i<a;i++)if(i in r&&r[i]===e)return i;return-1}function m(t,e,n,i){for(var r in t=o({},t),e=o({},e),i=i||e.page||_.location,w(i)||(i=I(i)),t.ppr=i.protocol.replace(":",""),t.po=i.hostname,t.pp=R(i.pathname),t.ph=i.hash,t.pq=i.search,t.pt=e.title||E.title,t.cbe=n||null,t.cid=e.cid||null,e)t[r]=("linkPage"===r||"formPage"===r)&&I(e[r]).href||e[r];return t}function n(t){return t||"https://cbe.capturehighered.net"}function e(t){var e,n,i=(n=(e=t).length,"."===e.charAt(--n)&&(e=e.slice(0,n)),"*."===e.slice(0,2)&&(e=e.slice(1)),e.split("."));"www"===i[0]&&i.shift();for(var r=i.length-1;0<=r;r--)2<i.length&&i.shift();return t="."+i.join(".")}function p(t,e){var n,i={};if(h(e)||(e=!0),h(t)||(t=E.location.search),T(t)&&""!==t)for(var r=t.substring(1).split("&"),i={},a=0;a<r.length;a++)n=r[a].split("="),T(n[0])&&(T(n[1])?i[!0===e?n[0].toLowerCase():n[0]]=d(_.decodeURIComponent(n[1])):i[!0===e?n[0].toLowerCase():n[0]]="");return i}function g(t){var e,n=null;if(!t)return n;switch(t.nodeName){case"INPUT":if(h(t.name)&&t.name&&"radio"===t.type||"checkbox"===t.type)for(var i=t.name.replace(/["\\]/g,"\\$&"),r=q.find('[name="'+i+'"]',t.form),n=[],a=0;a<r.length;a++)h(r[a])&&r[a].checked&&n.push(_.encodeURIComponent(r[a].value));else n=t.value;break;case"SELECT":if(t.multiple)for(n=[],e=0;e<t.length;e++)h(t[e])&&t[e].selected&&n.push(_.encodeURIComponent(t[e].value));else n=t.value;break;case"TEXTAREA":n=t.value}return n}function v(t){var e,n,i,r,a={};if(h(t))for(var o=t.length-1;0<=o;o--)(r=t[o])&&(e=r.type||null,i=h(r.name)&&r.name||h(r.id)&&r.id||["cbe-field",e,o].join("-"),n=r.getAttribute("data-cbe-tracked"),!i||!n&&e&&e.match(/^(submit|button|reset|file|image|password|hidden)$/)||(r=g(r),u(r)?a[i]=r.join(","):T(r)&&(a[i]=r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))));return a}function y(){try{var t=new Uint32Array(1);return _.crypto.getRandomValues(t),536870911&t[0]}catch(t){return Math.round(536870911*Math.random())}}function b(t){this.name=t.name&&"d"!==t.name?t.name:k,this.data={},this.content=!1,this.tracked=!1,this.is_mobile=!1,this.sendRequestTimeout=!1,this.client_id=t.trackingId||null,this.url=n(t.trackingUrl),this.full_url=this.url+S,this.cookie_path=t.cookiePath||"/",this.cookie_domain=t.cookieDomain||e(_.location.hostname),this.displayContent=!1!==t.content;try{this.setProperties(),this.setVisitorId(),this.setProspectId(),this.setSessionId(),this.setContentSession(),!1!==t.trackLinks&&this.trackLinks(),!1!==t.trackForms&&this.trackForms(),!1!==t.trackPageVisibility&&this.trackPageVisibility()}catch(t){this.handleErrors(t,"initTracker")}}var k="_cbe",_=window,E=document,S="/cbe/footprint",C=["trackingId","userId","cookieDomain"],N=function(t){return"undefined"!=typeof JSON?JSON.stringify(t):null},T=function(t){return null!=t&&-1<(t.constructor+"").indexOf("String")},w=function(t){return"object"==typeof t},I=function(t){var e=E.createElement("a");return e.href=t&&T(t)?d(t):"",e.hostname||(e.href=_.location.protocol+"//"+_.location.hostname+t),{pathname:R(e.pathname),hostname:e.hostname,protocol:e.protocol,host:e.host,hash:e.hash,href:e.href,port:e.port,search:e.search}},A=function(t){return t.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"")},R=function(t){return"/"!==t&&"/"===t.substr(-1)&&(t=t.substr(0,t.length-1)),"/"!==t&&"/"!==t.charAt(0)&&(t="/"+t),t},x=function(t){if(w(t)&&t.url)return("BEACON"===(t=o({url:null,data:{}},t)).type?F:t.dataType&&"jsonp"===t.dataType?j:L)(t)},j=function(e){var n=!1,i=E.createElement("script"),r=E.getElementsByTagName("head")[0]||E.documentElement;e.data.t="js",i.type="text/javascript",i.defer=!0,i.async=!0,i.src=e.url+(e.url.indexOf("?")<0?"?":"&")+a(e.data),i.onerror=c(e.error)?e.error:function(){},i.onload=i.onreadystatechange=function(t){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,c(e.success)&&e.success(),i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i))},r.insertBefore(i,r.firstChild)},L=function(t){t.data.t="img",t.data.ts=Math.floor((new Date).getTime()/1e3);var e=new Image(1,1);e.src=t.url+".gif"+(t.url.indexOf("?")<0?"?":"&")+a(t.data),e.onload=c(t.success)?t.success:function(){},e.onerror=c(t.error)?t.error:function(){}},F=function(e){if(!h(_.navigator.sendBeacon)||!h(_.FormData)||"undefined"==typeof JSON)return L(e);var t,n=new _.FormData;for(t in e.data)(w(e.data[t])&&e.data[t]||e.data.hasOwnProperty(t)&&e.data[t]&&""!==e.data[t])&&(w(e.data[t])?n.append(t,JSON.stringify(e.data[t])):n.append(t,e.data[t]));c(_.navigator.sendBeacon.bind)&&_.navigator.sendBeacon.bind(_.navigator);try{_.navigator.sendBeacon(e.url,n)||L(e)}catch(t){L(e)}},O={enabled:function(){try{return h(_.navigator.cookieEnabled)?!!_.navigator.cookieEnabled:(this.set("_captest","1"),"1"==this.get("_captest"))}catch(t){return!1}},set:function(t,e,n,i,r,a){var o,s="";e=e?_.encodeURIComponent(e):"",r=r?";Domain="+r:"",a=a?";Secure":"",i=";path="+(i||"/"),n&&((o=new Date).setTime(o.getTime()+n),s=";expires="+o.toUTCString()),E.cookie=t+"="+e+s+i+r+a+";samesite=Lax"},get:function(t){t=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return!(!t||!t[2])&&_.decodeURIComponent(t[2])},destroy:function(t,e,n){this.set(t,"",-1,e,n)}},P={events:{},addEvent:function(t,e,n,i,r,a){var o=t;this.events[o]||(this.events[o]=[]),this.events[o].push({el:e,event:o,handler:n,capture:a||!1,delegated:i||!1,delegatedEl:r||!1}),this.addEventListener(e,t,i||n,a||!1)},removeEvent:function(t,e,n,i,r){var a,o=t;if(this.events[o]){for(var s in this.events[o])(a=this.events[o][s])&&(a.delegated&&(n=a.delegated),n=n||a.handler,r=r||a.capture,i&&a.delegatedEl?a.delegatedEl===i&&(this.removeEventListener(e,t,n,r),this.events[o].splice(s,1)):a.el===e&&(this.removeEventListener(e,t,n,r),this.events[o].splice(s,1)));this.events[o]&&this.events[o].length||delete this.events[o]}},bind:function(t,e,n,i,r,a){if(e){var o=e.split(" ");if(t){u(t)||t.length||(t=[t]);for(var s=t.length-1;0<=s;s--)for(var c=o.length-1;0<=c;c--)this.addEvent(o[c],t[s],n,i,r,a)}}},unbind:function(t,e,n,i,r){if(e){if(T(t)&&!e&&this.events[t]){e=t,t=[];for(var a=0;a<this.events[e].length;a++)this.events[e][a].el&&t.push(this.events[e][a].el)}if(t){var o=e.split(" ");u(t)||t.length||(t=[t]);for(a=t.length-1;0<=a;a--)for(var s=o.length-1;0<=s;s--)this.removeEvent(o[s],t[a],n,i,r)}}},delegate:function(t,r,e,a,n){this.bind(t,e,a,function(t){if(t.target){var e=!1,n=q.find(r,t.currentTarget||t.searchElement);if(0<=f(n,t.target))e=n[f(n,t.target)];else for(var i=0;i<n.length;i++)if(n[i].contains(t.target)){e=n[i];break}e&&(t.delegateTarget=e,a.call(this,t))}},r,n)},undelegate:function(t,e,n,i,r){this.unbind(t,n,i,e,r)},addEventListener:function(t,e,n,i){t!==_&&!q.isNode(t)||(e=e.split(".")[0],t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n)},removeEventListener:function(t,e,n,i){t!==_&&!q.isNode(t)||(e=e.split(".")[0],t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null)},onReady:function(t,e){var n,i;E.readyState&&!/interactive|complete/.test(E.readyState)?(n="DOMContentLoaded"+(e?"."+e:""),i=function(){P.unbind(E,n,i),t.call(this)},P.bind(E,n,i)):t.call(this)},onLoad:function(t,e){var n,i;E.readyState&&"complete"!==E.readyState?(n="readystatechange"+(e?"."+e:""),i=function(){"complete"===E.readyState&&(P.unbind(E,n,i),t.call(this))},P.bind(E,n,i)):t.call(this)}},q={isNode:function(t){return("object"==typeof Node?t instanceof Node:t)&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},nodeCollectionToArray:function(t){var e,n=[];if(!t||!t.length)return n;for(e=0;e<t.length;e++)n.push(t[e]);return n},setDomStyles:function(t,e){if(w(e))for(var n in e)try{t.style[n]=e[n]}catch(t){}return t},setStyleBlock:function(t,e){var n=E.createElement("style");e=e||E.head||E.getElementsByTagName("head")[0],n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n)},find:function(t,e){var n,i,r,a,o=w(e)?e:document,s=0,c=[],l=[];u(t)||(t=[t]);for(var d=0;d<t.length;d++)if(n=(r=t[d].replace(/^\s+|\s+$/g,"")).split(" ").length,"#"===r.substring(0,1)&&1===n)r=r.slice(1,r.length),(a=E.getElementById(r))&&(l=l.concat(a));else if(h(o.querySelectorAll))(a=o.querySelectorAll(r))&&(l=l.concat(this.nodeCollectionToArray(a)));else if(c=o.all,"."===r.substring(0,1))if(r=r.slice(1,r.length),h(o.getElementsByClassName))(a=o.getElementsByClassName(r))&&(l=l.concat(this.nodeCollectionToArray(a)));else for(i=new RegExp("(^|\\s)"+r+"(\\s|$)"),s=0;s<c.length;s++)(a=c[s])&&i.test(a.className)&&l.push(a);else if("["===r.substring(0,1)&&"]"===r.substring(r.length-1,r.length))for(r=(r=r.slice(1,r.length)).substring(0,r.length-1),c=o.getElementsByTagName("*"),s=0;s<c.length;s++)(a=c[s])&&null!==a.getAttribute(r)&&l.push(a);else(a=o.getElementsByTagName(r))&&(l=l.concat(this.nodeCollectionToArray(a)));return l}},D={query:q,events:P,cookies:O,logError:i,isObject:w,isString:T,isDefined:h,stringify:N,serialize:a,arrayIndex:f,sendRequest:x,isStringEmail:l,getProperties:m,getFormValues:v,isSiteHostName:s,getParsedQuery:p,getCookieDomain:e,getFormFieldVal:g,getParsedUrlString:I},U={pageview:["page","title"],form:["form"],link:["linkTitle","linkPage","page","title"],event:["category","action","label","page","title"]},B=b.prototype={};B.handleErrors=function(t,e){var n=m(this.data);i(t,n,e,this.full_url)},B.set=function(t,e){e&&(this.data[t]=e)},B.unset=function(t){this.data[t]&&delete this.data[t]},B.setProperties=function(){var t,e,n,i=_.screen,r=E.location,a=p()||{},o=("cbeid"===a.utm_campaign?a.utm_content:a.utm_cbeid)||a.cbeid||a.cbe_id||!1,s=E.referrer&&p(I(E.referrer).search)||{};this.set("v",1.3),this.set("n",this.name),this.set("id",this.client_id),this.set("pr",(n=E.referrer,/^https?:\/\//i.test(n)?(e="//"+E.location.hostname,5!==(t=n.indexOf(e))&&6!==t||"/"!==(e=n.charAt(t+e.length))&&"?"!==e&&""!==e&&":"!==e?n:null):null)),this.set("pl",(_.navigator.language||_.navigator.browserLanguage||"").toLowerCase()),this.set("pe",r.characterSet||r.charset),this.set("ps",i.width+"x"+i.height),this.set("pv",(t=E.body,e=E.documentElement,n=t&&t.clientWidth&&t.clientHeight,r=[],e&&e.clientWidth&&e.clientHeight&&("CSS1Compat"===E.compatMode||!n)?r=[e.clientWidth,e.clientHeight]:n&&(r=[t.clientWidth,t.clientHeight]),(e=r[0]<=0||r[1]<=0)?"":r.join("x"))),this.set("pc",i.colorDepth+"-bit"),this.set("cs",O.get("_capc")||null),(a||s)&&(this.set("prid",a.cbe_prid||a.prid||s.prid),this.set("scid",a.cbe_scid||a.scid||s.scid),this.set("scid2",a.cbe_altid||s.cbe_altid)),a&&(this.set("em",a.cbe_email),this.set("hid",a.hid),this.set("cid",a.cid),this.set("tid",a.tid),this.set("utmc",a.utm_campaign),this.set("utmn",a.utm_source),this.set("utmm",a.utm_medium),this.set("utmct",a.utm_content),this.set("utmt",a.utm_term),this.set("is_test",!(!a.is_test&&!a.cbe_test)),this.set("content_id",a.content_id||a.cbe_content),this.set("cbe_campaign",a.cbe_campaign),this.set("cbe_ts",a.cbe_ts),this.set("cbe_c",a.cbe_rcid||a.cbe_c),this.set("cbe_source",a.cbe_source),this.set("cbe_medium",a.cbe_medium)),o&&(l(o)?this.data.em||this.set("em",o):(this.data.scid||this.set("scid",o),this.data.cbeid||this.set("cbeid",o)))},B.setVisitorId=function(t){var e=O.get("_capid"),e=t||e||O.get("_cap");e&&!isNaN(e)||(e=function(){for(var t=_.navigator.userAgent+(E.cookie||"")+(E.referrer||""),e=t.length,n=_.history.length;0<n;)t+=n--^e++;return[y()^536870911&function(t){var e,n,i,r=1;if(t)for(r=0,i=t.length-1;0<=i;i--)r=0!=(n=266338304&(r=(r<<6&268435455)+(e=t.charCodeAt(i))+(e<<14)))?r^n>>21:r,r|=0;return r}(t),Math.round((new Date).getTime()/1e3)].join("").substring(0,19)}(),this.set("new",1)),e&&""!=e&&!isNaN(e)&&(this.set("vid",e),O.set("_cap",_.encodeURIComponent(e),63072e6,this.cookie_path,this.cookie_domain))},B.setSessionId=function(t){t=t||O.get("_caps");t&&!isNaN(t)||(t=Math.floor(65535&y())+""+Math.round((new Date).getTime()/1e3)),t&&""!=t&&!isNaN(t)&&(this.set("sessid",t),O.set("_caps",t,9e5,this.cookie_path,this.cookie_domain))},B.setProspectId=function(t){var e,n;t?e=t:n=this.data.prid?(e=this.data.prid,"query"):(e=O.get("_capp")||function(t){try{if(h(localStorage)&&w(localStorage))return localStorage.getItem(t)}catch(t){}}("_capp"),"cookie"),!this.data.is_test&&e&&""!==e&&(this.data.cbe_source||this.set("cbe_source",n),this.set("prid",e),O.set("_capp",_.encodeURIComponent(e),864e5,this.cookie_path,this.cookie_domain),function(t,e){try{if(h(localStorage)&&w(localStorage)&&localStorage.setItem(t,e))return}catch(t){}}("_capp",_.encodeURIComponent(e)))},B.setContentSession=function(){var t=O.get("_capc");t&&O.set("_capc",t,9e5,"/",e(_.location.hostname))},B.trackContent=function(e){try{var n,t;this.displayContent&&((n=this).content?n.content.processContent(e):_._cbe.content?(t=_._cbe.content(D,n.name),n.content=new t(e,n.url,n.is_mobile,n.data)):x({url:this.url+"/cbe/content.js",dataType:"jsonp",success:function(){try{var t;_._cbe.content&&(t=_._cbe.content(D,n.name),n.content=new t(e,n.url,n.is_mobile,n.data))}catch(t){n.handleErrors(t,"trackContentInner")}}}))}catch(t){this.handleErrors(t,"trackContent")}},B.trackPageVisibility=function(){function t(t){try{"visible"===E.visibilityState&&(O.get("_caps")||(e.setSessionId(),e.sendRequest("pagefocus")))}catch(t){e.handleErrors(t,"trackPageVisibility")}}var e=this;P.unbind(E,"visibilitychange.tk",t),P.bind(E,"visibilitychange.tk",t)},B.trackLinks=function(){var t,i=this,e=E.links;e&&(t=function(t){try{var e=t.target||t.srcElement,n=c(e.getAttribute)&&e.getAttribute("href");n&&e.host&&(s(e.host)&&("#"===n||"#"!==n.charAt(0))||i.sendRequest("link",{linkPage:e.href,linkTitle:e.text}))}catch(t){i.handleErrors(t,"trackLinks")}},P.unbind(e,"click.lk",t),P.bind(e,"click.lk",t))},B.trackForms=function(){function i(t){try{var e=t.target&&t.target.form||t.srcElement&&t.srcElement.form||t.target;e&&"FORM"===e.nodeName&&null===e.getAttribute("data-cbe-form-id")&&(a&&(clearTimeout(a),a=!1),a="click"==t.type||"submit"==t.type?setTimeout(function(){a=!1,r.sendForm(e)},30):setTimeout(function(){a=!1,r.sendForm(e,t.type)},5e3))}catch(t){r.handleErrors(t,"trackFormsSubmit")}}function t(t){try{var e=t.target||t.srcElement||t.target,n=e&&e.innerText.toLowerCase();!a&&"submit"===e.type&&e.form&&(n&&-1!==n.indexOf("send")||-1!==n.indexOf("submit"))&&i(t)}catch(t){r.handleErrors(t,"trackFormsClick")}}var r=this,a=!1;P.undelegate(E,"form","change.fm",i,!0),P.undelegate(E,"form","submit.fm",i,!0),P.delegate(E,"form","change.fm",i,!0),P.delegate(E,"form","submit.fm",i,!0),"e1c184ce"==this.client_id&&(P.undelegate(E,"button","click.fm",t,!0),P.delegate(E,"button","click.fm",t,!0))},B.sendRequest=function(t,e){var n;t&&t.match(/^(pageview|pagefocus|pageleave|form|id|link|event|destroy)$/)&&x({dataType:"jsonp"==(n="pageview"==t?"jsonp":"BEACON")?n:null,data:m(this.data,e,t),type:n,url:this.full_url})},B.sendComplete=function(t){if((this.tracked=!0,this.unset("new"),t.ts&&!isNaN(t.ts))&&1800<=(new Date).getTime()/1e3-t.ts)return;this.is_mobile=1==t.m,t.hid&&(this.data.hid=t.hid),t.tid&&(this.data.tid=t.tid),t.pid&&t.pid!==this.data.prid&&this.setProspectId(t.pid),t.id&&t.id!==this.data.vid&&this.setVisitorId(t.id),t.c&&this.trackContent(t.c)},B.sendForm=function(t,e){if(t){var n,i=[],r=v(t.elements);for(n in r)l(r[n])?(i.push(r[n]),r[n]=r[n]):r[n]="";e&&"submit"!==e?!this.data.prid&&i.length&&this.sendRequest("id",{formEm:i.join(",")}):this.sendRequest("form",{formID:t.getAttribute("data-cbe-app-form-id")||null,formEm:i.length?i.join(","):null,formPage:t.getAttribute("action"),formTitle:t.getAttribute("id"),formData:r})}},B.send=function(){try{var t,e,n,i=this;arguments.length&&O.enabled()&&!O.get("_capt")&&(O.set("_capt",1,100,this.cookie_path,this.cookie_domain),e="string"==typeof arguments[0]?(t=arguments[0],[].slice.call(arguments,1)):(t=arguments[0]&&arguments[0].type,arguments),t&&(n=r(U[t]||[],e),"complete"===t&&e.length?i.sendComplete(n):"form"===t?i.sendForm(n.form):"destroy"===t?i.destroy():"content"===t?i.content&&i.content.processDynamicContent(n):P.onLoad(function(){clearTimeout(i.sendRequestTimeout),i.sendRequestTimeout=setTimeout(function(){i.sendRequest(t,n)},10)},"tk_"+t)))}catch(t){this.handleErrors(t,"send")}},B.destroy=function(){!function(t){try{if(h(localStorage)&&w(localStorage))return localStorage.removeItem(t)}catch(t){}}("_capp"),O.destroy("_cap",this.cookie_path,this.cookie_domain),O.destroy("_capid",this.cookie_path,this.cookie_domain),O.destroy("_caps",this.cookie_path,this.cookie_domain),O.destroy("_capsess",this.cookie_path,this.cookie_domain),O.destroy("_capc",this.cookie_path,this.cookie_domain),O.destroy("_capp","/",this.cookie_domain),this.sendRequest("destroy"),this.data={}};function M(t){for(var e,n,i,r,a=[],o=0;o<arguments.length;o++)a.push((r=i=n=void 0,n={},i=(e=arguments[o])[1]&&e[1].name?e[1].name:null,null!==(r=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/.exec(e[0]))&&4===r.length&&(n.queue=i||r[1]||k,n.command=r[3],n.args=[].slice.call(e,1)),n));return a}var $,V,H,J=function(){J.fire.apply(J,[arguments])};J.tracker={},J.fire=function(){var t=M.apply(J,arguments);for(J.f=[];0<t.length;t.shift())J.callMethod(t[0])},J.callMethod=function(t){var e=J.tracker[t.queue];"create"===t.command?J.create.apply(J,t.args):e&&("log"===t.command?e.send.apply(e,t.args):c(e[t.command])&&e[t.command].apply(e,t.args))},J.create=function(){var t=r(C,[].slice.call(arguments));t.name=t.name||k;var e=t.name;return J.tracker[e]||(J.tracker[e]=function(t){try{return new b(t)}catch(t){i(t,{},"createTracker",n()+S)}}(t),J.tracker[e])},J.destroy=function(){var t=J.tracker.d;return t?(J.tracker=null,t.destroy.apply(t,arguments)):null},J.track=function(){var t,e,n,i=_._cbe;return i&&i.loaded||(J.loaded=!0,e=_._cbe=J,i=i&&i.q,t="log",n=(e=e).send,e[t]=function(){try{return n.apply(this,arguments)}catch(t){}},u(i)&&J.fire.apply(J,i)),!0},V=!1,H=J.track,t(H)||($=function(){!V&&t(H)&&(V=!0,P.unbind(E,"visibilitychange",$,!1))},P.bind(E,"visibilitychange",$))}(window);